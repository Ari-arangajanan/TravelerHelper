package com.MITProjectService.bot.Services.impl;import com.MITProjectService.bot.Services.BookingService;import com.MITProjectService.bot.Services.PayHereService;import com.MITProjectService.bot.Services.PaymentService;import com.MITProjectService.bot.dao.jpaRepos.PaymentRepository;import com.MITProjectService.bot.domain.Bookings;import com.MITProjectService.bot.domain.Payment;import com.MITProjectService.bot.enums.PaymentMethodEnum;import com.MITProjectService.bot.request.PaymentRequest;import jakarta.annotation.Resource;import org.springframework.context.annotation.Lazy;import org.springframework.stereotype.Service;@Servicepublic class PaymentServiceImpl implements PaymentService {    @Resource    private PaymentRepository paymentRepository;    @Resource    private PayHereService payHereService;    @Resource    @Lazy    private BookingService bookingService;    @Override    public String pay(PaymentRequest paymentRequest) {        // Retrieve booking details using the booking ID        Bookings booking = bookingService.getBookingById(paymentRequest.getBookingId());        if(booking == null){            throw new RuntimeException("Booking not found");        }        paymentRequest.setBooking(booking);        return switch (PaymentMethodEnum.fromName(paymentRequest.getPaymentMethod())) {            case CASH -> "false";            case ONLINE -> "false";            case CARD -> payHereService.doPayment(paymentRequest);            default -> "false";        };    }    @Override    public Payment saveOrUpdate(Payment payment) {        return paymentRepository.save(payment);    }    @Override    public Payment findByBookingId(Long bookingId) {        return paymentRepository.getByBookingId(bookingId);    }    @Override    public Payment getInvoice(PaymentRequest paymentRequest) {        // Retrieve booking details using the booking ID        return findByOrderId(paymentRequest.getOrderId());    }    private Payment findByOrderId(String orderId) {        return paymentRepository.getByOrderId(orderId);    }}